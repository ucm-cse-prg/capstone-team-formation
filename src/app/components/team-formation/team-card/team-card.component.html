<mat-card class="teams-card">
  <mat-card-header>
    <mat-card-title>Team {{ team.id }}</mat-card-title>
    <mat-card-subtitle>Project ID: {{ team.projectId }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <p><strong>Students:</strong></p>
    <p>Drag and drop students to form teams.</p>
    <div
      cdkDropList
      [cdkDropListData]="team.students"
      [cdkDropListConnectedTo]="connectedDropListIds"
      [id]="'team-' + team.id"
      (cdkDropListDropped)="onDrop($event)"
      class="student-drop-zone"
    >
      @for (student of team.students; track student.id) {
        <div
          cdkDrag
          class="student-card"
          [class.locked]="student.locked"
        >
          <div class="student-info">
            <strong>{{ student.name }}</strong> â€” {{ student.skills.join(', ') }}
            <div class="student-preference">
              Project Preference:
              {{
                getPreferenceRank(student) !== null
                  ? (getPreferenceRank(student)! + 1) + getOrdinalSuffix(getPreferenceRank(student)! + 1) + ' choice'
                  : 'Not ranked'
              }}
            </div>
          </div>

          <mat-icon *ngIf="student.locked">lock</mat-icon>
        </div>
      }
    </div>
    <div class="metrics">
      <div class="metric">
        <strong>Skill Match:</strong> {{ skillMatch }}%
        <mat-progress-bar [value]="skillMatch" color="primary" mode="determinate"></mat-progress-bar>
      </div>
      <div class="metric">
        <strong>Preference Score:</strong> {{ preferenceScore }}%
        <mat-progress-bar [value]="preferenceScore" color="accent" mode="determinate"></mat-progress-bar>
      </div>
    </div>

  </mat-card-content>
</mat-card>
